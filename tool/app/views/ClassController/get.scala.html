@(id: String, cls: Option[model.Class], skills: List[model.skill.Skill])(implicit helper: models.ModelHelper)

@mainWithHeader(call = routes.ClassController.get(id), obj = cls) {
    @for(c <- cls) {
        <div class="row">
            <div class="col-xs-12">
                @component.table.classes(c :: Nil) {
                    <tr>
                        <td></td>
                        <td>@component.form.name(default = c.name)</td>
                        <td>@component.form.skills(skills = skills, default = c.skillTree.toList)</td>
                        <td>@component.form.levelAttributes(default = c.getAttributes)</td>
                    </tr>
                }
            </div>
        </div>

        <div class="row">
            <div class="col-xs-12">
                <div id="update-result"></div>
                <button id="update" type="button" class="btn btn-default">Update</button>
                <button id="delete" type="button" class="btn btn-danger">Delete</button>
            </div>
        </div>

        <script>
            $('#update').click(function() {
                var url = window.location.origin + '@routes.ClassController.update';

                var body = {
                    'id': '@id',
                    'name': nameValue(),
                    'skills': skillsValue(),
                    'attributes': levelAttributesValue()
                };

                jsonApi(url, 'PUT', body, '#update-result');
            });

            $('#delete').click(function() {
                var url = window.location.origin + '@routes.ClassController.delete(id)';
                noContentApi(url, 'DELETE', '#update-result');
            });
        </script>
    }
}
