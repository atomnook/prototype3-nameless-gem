@(id: String, cls: Option[model.Class])
@main(title = "/classes/" + id) {
@if(cls.isEmpty) {
<div class="row">
    <div class="col-xs-12">
        <div class="page-header">
            <h1>/classes/@id not found</h1>
        </div>
    </div>
</div>
}
@for(c <- cls) {
<div class="row">
    <div class="col-xs-12">
        <div class="page-header">
            <h1>/classes/@id</h1>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xs-6">
        <div id="update-result"></div>
        <form>
            <div class="form-group">
                <label for="id">Id</label>
                <input type="text" class="form-control" id="id" value="@id" disabled>
            </div>
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" value="@c.name">
            </div>
            <button id="apply" type="button" class="btn btn-default">Apply</button>
            <button id="delete" type="button" class="btn btn-danger">Delete</button>
        </form>
    </div>
</div>
}
<script>
    $('#apply').click(function() {
        var url = window.location.origin + '@routes.ClassController.update';
        var id = $('#id').val();
        var name = $('#name').val();

        fetch(url, {
            method: 'PUT',
            headers: {'Content-Type': 'text/json'},
            body: JSON.stringify({'id': id, 'name': name})
        }).then(function(res) {
            if (res.status == 200) {
                window.location.reload(true);
            } else {
                res.json().then(function(json) {
                    $('#update-result').html('<div class="alert alert-danger" role="alert">' + JSON.stringify(json) + '</div>');
                });
            }
        })
    });
    $('#delete').click(function() {
        var url = window.location.origin + '@routes.ClassController.delete(id)';

        fetch(url, {
            method: 'DELETE'
        }).then(function(res) {
            if (res.status == 200) {
                window.location.reload(true);
            } else {
                res.json().then(function(json) {
                    $('#update-result').html('<div class="alert alert-danger" role="alert">' + JSON.stringify(json) + '</div>');
                });
            }
        })
    });
</script>
}
